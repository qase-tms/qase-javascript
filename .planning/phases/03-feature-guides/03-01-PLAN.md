---
phase: 03-feature-guides
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - qase-jest/docs/ATTACHMENTS.md
  - qase-playwright/docs/ATTACHMENTS.md
  - qase-cypress/docs/ATTACHMENTS.md
  - qase-mocha/docs/ATTACHMENTS.md
  - qase-vitest/docs/ATTACHMENTS.md
autonomous: true

must_haves:
  truths:
    - "User can attach files from filesystem using patterns in ATTACHMENTS.md for Jest, Playwright, Cypress, Mocha, Vitest"
    - "User can attach content from memory (text, JSON, binary) using documented patterns"
    - "User can attach content to specific test steps"
    - "Each guide uses correct framework-specific import and async/sync pattern"
  artifacts:
    - path: "qase-jest/docs/ATTACHMENTS.md"
      provides: "Jest attachment guide"
      contains: "require('jest-qase-reporter/jest')"
    - path: "qase-playwright/docs/ATTACHMENTS.md"
      provides: "Playwright attachment guide"
      contains: "import { qase } from 'playwright-qase-reporter'"
    - path: "qase-cypress/docs/ATTACHMENTS.md"
      provides: "Cypress attachment guide"
      contains: "import { qase } from 'cypress-qase-reporter/mocha'"
    - path: "qase-mocha/docs/ATTACHMENTS.md"
      provides: "Mocha attachment guide"
      contains: "require('mocha-qase-reporter/mocha')"
    - path: "qase-vitest/docs/ATTACHMENTS.md"
      provides: "Vitest attachment guide"
      contains: "import { qase } from 'vitest-qase-reporter'"
  key_links:
    - from: "qase-*/docs/ATTACHMENTS.md"
      to: "qase-*/docs/usage.md"
      via: "See Also links"
      pattern: "\\[Usage Guide\\]\\(usage\\.md\\)"
    - from: "qase-*/docs/ATTACHMENTS.md"
      to: "qase-*/docs/STEPS.md"
      via: "See Also links"
      pattern: "\\[Steps Guide\\]\\(STEPS\\.md\\)"
---

<objective>
Create ATTACHMENTS.md guides for the 5 frameworks with full attachment API support: Jest, Playwright, Cypress, Mocha, and Vitest.

Purpose: Users need dedicated documentation for attaching files, screenshots, logs, and binary content to Qase test results. Each framework has specific import patterns and async/sync behavior that must be documented accurately.

Output: 5 ATTACHMENTS.md files in respective qase-{framework}/docs/ directories, each following the master template structure with framework-specific code examples.
</objective>

<execution_context>
@/Users/gda/.claude/get-shit-done/workflows/execute-plan.md
@/Users/gda/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/templates/ATTACHMENTS-TEMPLATE.md
@.planning/docs/FRAMEWORK-VARIATIONS.md
@.planning/docs/CODE-STYLE-GUIDE.md
@.planning/templates/PLACEHOLDER-REFERENCE.md

Source examples to verify against:
@examples/single/jest/test/attach.test.js
@examples/single/playwright/test/attach.spec.js
@examples/single/mocha/test/attachTests.spec.js
@examples/single/vitest/test/attach.test.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ATTACHMENTS.md for Jest and Playwright</name>
  <files>qase-jest/docs/ATTACHMENTS.md, qase-playwright/docs/ATTACHMENTS.md</files>
  <action>
Apply ATTACHMENTS-TEMPLATE.md to create guides for Jest and Playwright.

**Jest ATTACHMENTS.md:**
- Replace {{FRAMEWORK_NAME}} with "Jest"
- Replace {{PACKAGE_NAME}} with "jest-qase-reporter", {{FRAMEWORK_INTEGRATION_PATH}} with "jest"
- Use CommonJS syntax (`const { qase } = require('jest-qase-reporter/jest')`) per Phase 2 decision
- All examples use `test()` function
- Async patterns with `await` where needed
- Verify file path example against `examples/single/jest/test/attach.test.js`
- Verify content attachment pattern against same file
- For "Attaching to Steps" section, show `await qase.step()` with `qase.attach()` inside
- Common Use Cases: Skip Selenium (not relevant for Jest). Include:
  - "Saving Test Artifacts" (e.g., JSON data, debug logs)
  - "API Response Logs" (fetch response content)
  - "Console Logs" (capture and attach console output)
- Replace {{USE_CASE_PLAYWRIGHT_EXAMPLE}} with N/A or remove (not Playwright)
- Replace all remaining placeholders with Jest-appropriate content

**Playwright ATTACHMENTS.md:**
- Replace {{FRAMEWORK_NAME}} with "Playwright"
- Replace {{PACKAGE_NAME}} with "playwright-qase-reporter", {{FRAMEWORK_INTEGRATION_PATH}} with root (no subpath)
- Use TypeScript/ES Modules syntax per Phase 2 decision
- All examples use `test()` function with `async` and `await`
- Verify against `examples/single/playwright/test/attach.spec.js`
- Common Use Cases: Include Playwright-specific screenshot example using `await page.screenshot()` + `qase.attach()`, API response logs, browser console logs
- Show both `qase.attach({ paths: ... })` and `qase.attach({ content: ..., name: ..., contentType: ... })` patterns

For both files:
- Method Reference section: Keep the API table from template
- MIME Types section: Keep the auto-detection table from template
- Troubleshooting section: Keep all 3 subsections (Not Appearing, Large Files, Binary Data Issues)
- See Also: Link to usage.md, STEPS.md, and commons config reference
- Run `node .planning/tools/validate-placeholders.js` on each file after creation

Do NOT include Selenium use case in Jest guide. Do NOT use `await` for `qase.attach()` calls (it is synchronous - verify from source code).
  </action>
  <verify>
Run: `node .planning/tools/validate-placeholders.js qase-jest/docs/ATTACHMENTS.md && node .planning/tools/validate-placeholders.js qase-playwright/docs/ATTACHMENTS.md`
Both should exit with code 0 (no unreplaced placeholders).
Verify files exist and have > 100 lines each.
  </verify>
  <done>
Jest ATTACHMENTS.md exists with CommonJS examples, correct import path, and Jest-specific use cases.
Playwright ATTACHMENTS.md exists with TypeScript/ESM examples, page.screenshot() use case, and correct import path.
Both files have zero unreplaced placeholders.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create ATTACHMENTS.md for Cypress, Mocha, and Vitest</name>
  <files>qase-cypress/docs/ATTACHMENTS.md, qase-mocha/docs/ATTACHMENTS.md, qase-vitest/docs/ATTACHMENTS.md</files>
  <action>
Apply ATTACHMENTS-TEMPLATE.md to create guides for Cypress, Mocha, and Vitest.

**Cypress ATTACHMENTS.md:**
- Replace {{FRAMEWORK_NAME}} with "Cypress"
- Replace {{PACKAGE_NAME}} with "cypress-qase-reporter", {{FRAMEWORK_INTEGRATION_PATH}} with "mocha"
- Use ES Modules syntax: `import { qase } from 'cypress-qase-reporter/mocha'`
- All examples use `it()` function with synchronous callbacks (no async/await)
- `qase.attach()` is synchronous in Cypress
- For "Attaching to Steps" section, show `qase.step()` with sync callback containing `qase.attach()`
- Common Use Cases: Include Cypress-specific screenshot example using `cy.screenshot()` + attach, `cy.request()` API response logs
- Verify against Cypress examples directory (no dedicated attach file exists - use patterns from stepTests.cy.js and source code)
- Note: Cypress auto-captures screenshots on failure; document manual screenshot attachment pattern

**Mocha ATTACHMENTS.md:**
- Replace {{FRAMEWORK_NAME}} with "Mocha"
- Replace {{PACKAGE_NAME}} with "mocha-qase-reporter", {{FRAMEWORK_INTEGRATION_PATH}} with "mocha"
- Use CommonJS syntax: `const { qase } = require('mocha-qase-reporter/mocha')`
- Use `it()` function with synchronous callbacks
- Use `function()` syntax (not arrow) where `this` context is needed (Phase 2 decision)
- Verify against `examples/single/mocha/test/attachTests.spec.js`
- Common Use Cases: Debug logs, file attachments, API testing logs

**Vitest ATTACHMENTS.md:**
- Replace {{FRAMEWORK_NAME}} with "Vitest"
- Replace {{PACKAGE_NAME}} with "vitest-qase-reporter", {{FRAMEWORK_INTEGRATION_PATH}} with root (no subpath)
- Use TypeScript/ESM syntax: `import { qase } from 'vitest-qase-reporter'`
- All examples use `test()` function with async/await
- Verify against `examples/single/vitest/test/attach.test.ts`
- Common Use Cases: File attachments, JSON data logging, binary content

For all 3 files:
- Method Reference: Keep API table from template
- MIME Types: Keep auto-detection table
- Troubleshooting: Keep all 3 subsections
- See Also: Link to usage.md, STEPS.md, commons config reference
- Run `node .planning/tools/validate-placeholders.js` on each file
  </action>
  <verify>
Run: `node .planning/tools/validate-placeholders.js qase-cypress/docs/ATTACHMENTS.md && node .planning/tools/validate-placeholders.js qase-mocha/docs/ATTACHMENTS.md && node .planning/tools/validate-placeholders.js qase-vitest/docs/ATTACHMENTS.md`
All should exit with code 0. Verify files exist and have > 100 lines each.
  </verify>
  <done>
Cypress ATTACHMENTS.md exists with sync callback examples and cy.screenshot() use case.
Mocha ATTACHMENTS.md exists with CommonJS/function() examples and correct import path.
Vitest ATTACHMENTS.md exists with TypeScript/ESM examples and correct import path.
All 3 files have zero unreplaced placeholders.
  </done>
</task>

</tasks>

<verification>
1. All 5 ATTACHMENTS.md files exist in their respective qase-{framework}/docs/ directories
2. Zero unreplaced {{PLACEHOLDER}} patterns in any file
3. Each file uses the correct import statement for its framework
4. Async frameworks (Jest, Playwright, Vitest) use `await` correctly
5. Sync frameworks (Cypress, Mocha) do NOT use `await`
6. All files have consistent section ordering matching the template
7. See Also links point to valid relative paths (usage.md, STEPS.md, ../../qase-javascript-commons/README.md)
</verification>

<success_criteria>
- 5 ATTACHMENTS.md files created, each > 100 lines
- validate-placeholders.js returns exit code 0 for all files
- Framework-specific code examples match working code in examples/single/
- Each guide includes: Overview, Attaching Files, Attaching Content, Attaching to Steps, Method Reference, MIME Types, Common Use Cases, Troubleshooting, See Also
</success_criteria>

<output>
After completion, create `.planning/phases/03-feature-guides/03-01-SUMMARY.md`
</output>
