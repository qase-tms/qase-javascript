---
phase: 03-feature-guides
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - qase-testcafe/docs/ATTACHMENTS.md
  - qase-testcafe/docs/STEPS.md
  - qase-wdio/docs/ATTACHMENTS.md
  - qase-wdio/docs/STEPS.md
  - qase-cucumberjs/docs/ATTACHMENTS.md
  - qase-cucumberjs/docs/STEPS.md
  - qase-newman/docs/ATTACHMENTS.md
  - qase-newman/docs/STEPS.md
autonomous: true

must_haves:
  truths:
    - "User can attach files and content using TestCafe builder pattern with qase.attach()"
    - "User can attach files and content using WDIO qase.attach() with both Mocha/Jasmine and Cucumber patterns"
    - "User understands CucumberJS attachment limitations and Gherkin-based step patterns"
    - "User understands Newman has no programmatic attachment or step API"
    - "Each guide accurately documents framework capabilities and limitations"
  artifacts:
    - path: "qase-testcafe/docs/ATTACHMENTS.md"
      provides: "TestCafe attachment guide"
      contains: "testcafe-reporter-qase/qase"
    - path: "qase-testcafe/docs/STEPS.md"
      provides: "TestCafe steps guide"
      contains: "await qase.step"
    - path: "qase-wdio/docs/ATTACHMENTS.md"
      provides: "WDIO attachment guide"
      contains: "wdio-qase-reporter"
    - path: "qase-wdio/docs/STEPS.md"
      provides: "WDIO steps guide"
      contains: "await qase.step"
    - path: "qase-cucumberjs/docs/ATTACHMENTS.md"
      provides: "CucumberJS attachment guide"
      contains: "Cucumber"
    - path: "qase-cucumberjs/docs/STEPS.md"
      provides: "CucumberJS steps guide"
      contains: "Given"
    - path: "qase-newman/docs/ATTACHMENTS.md"
      provides: "Newman attachment limitations guide"
      contains: "not support"
    - path: "qase-newman/docs/STEPS.md"
      provides: "Newman steps limitations guide"
      contains: "not support"
  key_links:
    - from: "qase-*/docs/ATTACHMENTS.md"
      to: "qase-*/docs/usage.md"
      via: "See Also links"
      pattern: "\\[Usage Guide\\]\\(usage\\.md\\)"
---

<objective>
Create ATTACHMENTS.md and STEPS.md guides for the 4 frameworks with unique patterns or limitations: TestCafe, WDIO, CucumberJS, and Newman.

Purpose: These 4 frameworks have distinct patterns that differ from the standard 5. TestCafe uses a builder pattern with .meta(), WDIO supports dual Mocha/Cucumber modes, CucumberJS uses Gherkin steps instead of qase.step(), and Newman has no programmatic API for attachments or steps. Each needs accurate documentation of both capabilities and limitations.

Output: 8 files (ATTACHMENTS.md + STEPS.md for each of 4 frameworks) with framework-appropriate content.
</objective>

<execution_context>
@/Users/gda/.claude/get-shit-done/workflows/execute-plan.md
@/Users/gda/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/templates/ATTACHMENTS-TEMPLATE.md
@.planning/templates/STEPS-TEMPLATE.md
@.planning/docs/FRAMEWORK-VARIATIONS.md
@.planning/docs/CODE-STYLE-GUIDE.md

Source code for API patterns:
@qase-testcafe/src/qase.ts
@qase-wdio/src/wdio.ts
@qase-testcafe/README.md
@qase-wdio/README.md

Working examples:
@examples/single/testcafe/attachmentTests.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ATTACHMENTS.md and STEPS.md for TestCafe and WDIO</name>
  <files>qase-testcafe/docs/ATTACHMENTS.md, qase-testcafe/docs/STEPS.md, qase-wdio/docs/ATTACHMENTS.md, qase-wdio/docs/STEPS.md</files>
  <action>
**TestCafe ATTACHMENTS.md:**
- Import: `import { qase } from 'testcafe-reporter-qase/qase'`
- TestCafe uses the qase class with static methods (builder pattern): `qase.attach({ paths: [...] })` and `qase.attach({ name, content, type })`. Note the parameter is `type` not `contentType` in TestCafe (verify from qase-testcafe/src/qase.ts - the attach method uses `type` parameter).
- Verify examples against `examples/single/testcafe/attachmentTests.js`
- Show file path attachment: `qase.attach({ paths: ['path/to/file'] })`
- Show content attachment: `qase.attach({ name: 'log.txt', content: 'content', type: 'text/plain' })`
- Show step-level attachment using the step callback's `s` parameter: `await qase.step('name', async (s) => { s.attach({ ... }) })` (verify from attachmentTests.js)
- Common Use Cases: TestCafe screenshot with `await t.takeScreenshot()`, page source capture
- Keep Method Reference table but update parameter names to match TestCafe API (paths, name, content, type)

**TestCafe STEPS.md:**
- Import: `import { qase } from 'testcafe-reporter-qase/qase'`
- Steps use async pattern: `await qase.step('name', async () => { ... })`
- Nested steps use callback parameter: `await qase.step('parent', async (s1) => { await s1.step('child', async () => { ... }) })` (verify from TestCafe README.md examples)
- IMPORTANT: TestCafe nested steps use the step callback parameter (s, s1, etc.) NOT `qase.step()` for nesting
- Show this distinct pattern clearly with example from README
- Common Patterns: TestCafe-specific patterns with `t.typeText()`, `t.click()`, fixture-level organization

**WDIO ATTACHMENTS.md:**
- Import: `import { qase } from 'wdio-qase-reporter'` (for Mocha/Jasmine)
- Document both modes:
  1. Mocha/Jasmine: `qase.attach({ name, content, type })` and `qase.attach({ paths: '...' })`
  2. Cucumber: "Cucumber attachments are automatically reported when using step attachments"
- Note WDIO-specific: `disableWebdriverScreenshotsReporting` option controls automatic screenshot attachment
- Verify from WDIO README.md and qase-wdio/src/wdio.ts source
- Common Use Cases: `await browser.takeScreenshot()` + attach, WebDriver command logs

**WDIO STEPS.md:**
- Import: `import { qase } from 'wdio-qase-reporter'`
- Document both modes:
  1. Mocha/Jasmine: `await qase.step('name', async (step) => { await step.step('child', async () => { ... }) })` - nested steps use callback parameter
  2. Cucumber: "Cucumber steps (Given/When/Then) are automatically reported as Qase steps"
- Note WDIO-specific: `disableWebdriverStepsReporting` option
- Verify nested step pattern from WDIO README.md examples
- Common Patterns: Browser interaction steps with `$('#selector')`, `browser.url()`

For all 4 files:
- Keep template structure (all sections in order)
- Adapt MIME Types and Troubleshooting sections
- See Also: Link to usage.md, corresponding guide (STEPS.md or ATTACHMENTS.md), commons config reference
- Run `node .planning/tools/validate-placeholders.js` on each file
  </action>
  <verify>
Run validate-placeholders.js on all 4 files. All should exit code 0.
Verify each file has > 80 lines.
Check that TestCafe examples use builder/meta pattern and WDIO documents both Mocha and Cucumber modes.
  </verify>
  <done>
TestCafe ATTACHMENTS.md and STEPS.md exist with builder pattern and nested step callback pattern documented.
WDIO ATTACHMENTS.md and STEPS.md exist with dual Mocha/Cucumber documentation.
All 4 files have zero unreplaced placeholders.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create ATTACHMENTS.md and STEPS.md for CucumberJS and Newman</name>
  <files>qase-cucumberjs/docs/ATTACHMENTS.md, qase-cucumberjs/docs/STEPS.md, qase-newman/docs/ATTACHMENTS.md, qase-newman/docs/STEPS.md</files>
  <action>
**CucumberJS ATTACHMENTS.md:**
- Adapt template significantly for CucumberJS patterns
- CucumberJS does NOT use `qase.attach()` programmatically (no import from reporter)
- Instead, use Cucumber's native `this.attach()` method in step definitions
- Add "Limitations" section at top of guide: "CucumberJS uses Cucumber's native attachment API (`this.attach()`) within step definitions. The Qase reporter automatically captures these attachments."
- Show pattern:
  ```javascript
  const { Given, When, Then } = require('@cucumber/cucumber');

  When('I take a screenshot', async function() {
    const screenshot = await driver.takeScreenshot();
    this.attach(screenshot, 'image/png');
  });
  ```
- If CucumberJS reporter does NOT support attachments at all, document this clearly: "CucumberJS reporter captures test results from Gherkin scenarios. Attachments added via Cucumber's `this.attach()` API are included in Qase results."
- Adapt Method Reference to show Cucumber's `this.attach()` API instead of `qase.attach()`
- Simplify Use Cases section for Gherkin context

**CucumberJS STEPS.md:**
- This is the most unique guide - CucumberJS uses Gherkin Given/When/Then as steps
- Add prominent section at top: "In Cucumber.js, test steps are defined using Gherkin syntax (Given/When/Then), not the `qase.step()` API. Each Gherkin step is automatically reported as a Qase test step."
- Replace template's "Defining Steps" with "Gherkin Steps" showing:
  ```gherkin
  Scenario: User login
    Given I am on the login page
    When I enter valid credentials
    And I click the login button
    Then I should see the dashboard
  ```
- Replace "Nested Steps" with explanation: "Gherkin does not support nested steps. Each Given/When/Then step is reported as a flat step in Qase results."
- Replace "Steps with Expected Result" with: Show Gherkin step with data tables or doc strings
- Remove "Steps with Attachments" or adapt to show `this.attach()` in step definition
- Remove async/await best practices (not applicable)
- Troubleshooting: "Steps not appearing" - verify reporter is configured as Cucumber formatter
- Common Patterns: Show Background steps, Scenario Outline with Examples table

**Newman ATTACHMENTS.md:**
- Add prominent "Limitations" section at the very top:
  "Newman reporter does not support programmatic attachments. Newman runs Postman collections which do not have a mechanism to attach files to individual test results."
- Keep the guide brief but informative (50-80 lines):
  - Explain what IS possible: "Test results including request/response data are automatically captured"
  - Suggest alternatives: "For file attachments, consider using a different reporter or attaching files via the Qase API directly"
  - Include configuration for what Newman DOES report
- Remove sections that don't apply: Attaching Files, Attaching Content, Attaching to Steps, Method Reference, MIME Types, Common Use Cases
- Keep: Overview (with limitations), Troubleshooting (minimal), See Also

**Newman STEPS.md:**
- Add prominent "Limitations" section at the very top:
  "Newman reporter does not support programmatic test steps. Postman collection test scripts (`pm.test()`) are reported as individual test results, not as steps within a test."
- Keep the guide brief (40-60 lines):
  - Explain what IS reported: Each `pm.test()` block is a separate test result
  - Show how Postman pre-request scripts and tests map to Qase results
  - Suggest: "For step-level reporting, consider organizing Postman tests as separate `pm.test()` blocks"
- Remove sections that don't apply: Defining Steps, Nested Steps, Steps with Expected/Data, Step Attachments, Best Practices patterns
- Keep: Overview (with limitations), Troubleshooting (minimal), See Also

For all 4 files:
- Run `node .planning/tools/validate-placeholders.js` on each file
- Do NOT apologize for limitations - state them clearly and focus on what IS supported
- Keep See Also links to usage.md and commons config reference
  </action>
  <verify>
Run validate-placeholders.js on all 4 files. All should exit code 0.
Verify CucumberJS guides document Gherkin patterns (not qase.step()).
Verify Newman guides clearly state limitations without placeholder content.
  </verify>
  <done>
CucumberJS ATTACHMENTS.md documents Cucumber's native this.attach() pattern.
CucumberJS STEPS.md documents Gherkin Given/When/Then as the step mechanism.
Newman ATTACHMENTS.md clearly states no programmatic attachment support.
Newman STEPS.md clearly states no programmatic step support.
All 4 files have zero unreplaced placeholders.
  </done>
</task>

</tasks>

<verification>
1. All 8 files exist in their respective qase-{framework}/docs/ directories
2. Zero unreplaced {{PLACEHOLDER}} patterns in any file
3. TestCafe uses builder pattern with `qase.attach()` and nested step callbacks
4. WDIO documents both Mocha/Jasmine and Cucumber modes
5. CucumberJS uses Gherkin patterns, NOT qase.step() or qase.attach()
6. Newman clearly documents limitations without filler content
7. See Also links are valid relative paths
</verification>

<success_criteria>
- 8 files created (ATTACHMENTS.md + STEPS.md for TestCafe, WDIO, CucumberJS, Newman)
- validate-placeholders.js returns exit code 0 for all files
- TestCafe/WDIO guides have full API examples; CucumberJS/Newman have appropriate scope
- Framework-specific patterns verified against source code and README files
</success_criteria>

<output>
After completion, create `.planning/phases/03-feature-guides/03-03-SUMMARY.md`
</output>
