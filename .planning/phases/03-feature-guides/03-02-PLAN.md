---
phase: 03-feature-guides
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - qase-jest/docs/STEPS.md
  - qase-playwright/docs/STEPS.md
  - qase-cypress/docs/STEPS.md
  - qase-mocha/docs/STEPS.md
  - qase-vitest/docs/STEPS.md
autonomous: true

must_haves:
  truths:
    - "User can create test steps using patterns in STEPS.md for Jest, Playwright, Cypress, Mocha, Vitest"
    - "User can create nested (hierarchical) steps"
    - "User can add expected results and data to steps"
    - "User can attach content to specific steps"
    - "Each guide uses correct async/sync pattern for its framework"
  artifacts:
    - path: "qase-jest/docs/STEPS.md"
      provides: "Jest steps guide"
      contains: "await qase.step"
    - path: "qase-playwright/docs/STEPS.md"
      provides: "Playwright steps guide"
      contains: "test.step"
    - path: "qase-cypress/docs/STEPS.md"
      provides: "Cypress steps guide"
      contains: "qase.step('Step"
    - path: "qase-mocha/docs/STEPS.md"
      provides: "Mocha steps guide"
      contains: "qase.step('Step"
    - path: "qase-vitest/docs/STEPS.md"
      provides: "Vitest steps guide"
      contains: "await qase.step"
  key_links:
    - from: "qase-*/docs/STEPS.md"
      to: "qase-*/docs/usage.md"
      via: "See Also links"
      pattern: "\\[Usage Guide\\]\\(usage\\.md\\)"
    - from: "qase-*/docs/STEPS.md"
      to: "qase-*/docs/ATTACHMENTS.md"
      via: "See Also links"
      pattern: "\\[Attachments Guide\\]\\(ATTACHMENTS\\.md\\)"
---

<objective>
Create STEPS.md guides for the 5 frameworks with full step API support: Jest, Playwright, Cypress, Mocha, and Vitest.

Purpose: Users need dedicated documentation for defining test steps with nested hierarchies, expected results, and step-level attachments. The async/sync differences across frameworks are critical to document accurately.

Output: 5 STEPS.md files in respective qase-{framework}/docs/ directories, each following the master template structure with framework-specific step patterns.
</objective>

<execution_context>
@/Users/gda/.claude/get-shit-done/workflows/execute-plan.md
@/Users/gda/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/templates/STEPS-TEMPLATE.md
@.planning/docs/FRAMEWORK-VARIATIONS.md
@.planning/docs/CODE-STYLE-GUIDE.md
@.planning/templates/PLACEHOLDER-REFERENCE.md

Source examples to verify against:
@examples/single/jest/test/steps.test.js
@examples/single/playwright/test/steps.spec.js
@examples/single/cypress/cypress/e2e/stepTests.cy.js
@examples/single/mocha/test/stepTests.spec.js
@examples/single/vitest/test/steps.test.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create STEPS.md for Jest and Playwright</name>
  <files>qase-jest/docs/STEPS.md, qase-playwright/docs/STEPS.md</files>
  <action>
Apply STEPS-TEMPLATE.md to create guides for Jest and Playwright.

**Jest STEPS.md:**
- Replace {{FRAMEWORK_NAME}} with "Jest"
- Replace {{PACKAGE_NAME}} with "jest-qase-reporter", {{FRAMEWORK_INTEGRATION_PATH}} with "jest"
- Use CommonJS syntax: `const { qase } = require('jest-qase-reporter/jest')`
- All step examples use `await qase.step('name', async () => { ... })` pattern
- Verify step examples against `examples/single/jest/test/steps.test.js`
- {{STEP_ASYNC_EXAMPLE}}: Show 3 sequential steps with await
- {{STEP_PARAMS_EXAMPLE}}: Show step with template literal name (dynamic parameter)
- {{NESTED_STEPS_EXAMPLE}}: Show parent step with 2 child steps, all with await
- {{STEP_EXPECTED_DATA_EXAMPLE}}: Show `await qase.step('name', async () => {}, 'expected result', 'data')`
- {{STEP_ATTACHMENTS_EXAMPLE}}: Show `qase.attach()` called inside a step callback
- {{PATTERN_PAGE_OBJECT_EXAMPLE}}: Show reusable step function pattern for Jest
- {{PATTERN_API_EXAMPLE}}: Show API testing steps (fetch + assert)
- {{PATTERN_SETUP_TEARDOWN_EXAMPLE}}: Show beforeEach/afterEach with steps
- Troubleshooting: Emphasize `await` requirement; missing await causes steps to not appear

**Playwright STEPS.md:**
- Replace {{FRAMEWORK_NAME}} with "Playwright"
- Replace {{PACKAGE_NAME}} with "playwright-qase-reporter", no subpath
- Use TypeScript/ESM syntax: `import { qase } from 'playwright-qase-reporter'`
- CRITICAL: Document both `qase.step()` and native `test.step()` patterns (Phase 2 decision)
- Add a section after "Defining Steps" titled "Using Native test.step()" showing Playwright's built-in step API
- Explain: "Playwright supports both `qase.step()` and native `test.step()`. Both are reported to Qase. Use `test.step()` for Playwright-native integration or `qase.step()` for cross-framework consistency."
- Verify against `examples/single/playwright/test/steps.spec.js`
- {{STEP_ASYNC_EXAMPLE}}: Show both `qase.step()` and `test.step()` patterns
- {{NESTED_STEPS_EXAMPLE}}: Show nested steps with `await test.step()` and `await qase.step()`
- Common Patterns: Include Page Object steps with `page` parameter, API testing with `request` fixture
- All examples use TypeScript syntax with proper type annotations where needed

For both files:
- Keep Step Status table from template (Passed/Failed/Invalid)
- Keep Best Practices section from template (Atomic, Descriptive, Context)
- Troubleshooting: Keep all 3 subsections with framework-appropriate examples
- See Also: Link to usage.md, ATTACHMENTS.md, commons config reference
- Run `node .planning/tools/validate-placeholders.js` on each file
  </action>
  <verify>
Run: `node .planning/tools/validate-placeholders.js qase-jest/docs/STEPS.md && node .planning/tools/validate-placeholders.js qase-playwright/docs/STEPS.md`
Both should exit with code 0.
Verify files exist and have > 120 lines each.
  </verify>
  <done>
Jest STEPS.md exists with async/await examples and CommonJS imports.
Playwright STEPS.md exists with both qase.step() and native test.step() patterns documented.
Both files have zero unreplaced placeholders.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create STEPS.md for Cypress, Mocha, and Vitest</name>
  <files>qase-cypress/docs/STEPS.md, qase-mocha/docs/STEPS.md, qase-vitest/docs/STEPS.md</files>
  <action>
Apply STEPS-TEMPLATE.md to create guides for Cypress, Mocha, and Vitest.

**Cypress STEPS.md:**
- Replace {{FRAMEWORK_NAME}} with "Cypress"
- Replace {{PACKAGE_NAME}} with "cypress-qase-reporter", {{FRAMEWORK_INTEGRATION_PATH}} with "mocha"
- Use ESM syntax: `import { qase } from 'cypress-qase-reporter/mocha'`
- CRITICAL: All step callbacks are SYNCHRONOUS - no async/await (Phase 2 decision)
- Change template's "Using Async Function" heading to "Using Step Callbacks" (Cypress steps are sync)
- Update TypeScript signature in template to show sync version: `qase.step(name: string, callback: () => void)`
- Verify against `examples/single/cypress/cypress/e2e/stepTests.cy.js`
- {{STEP_ASYNC_EXAMPLE}}: Show `qase.step('name', () => { cy.visit(...) })` pattern (NO await)
- {{NESTED_STEPS_EXAMPLE}}: Show nested sync steps with Cypress commands inside
- Common Patterns: Show Cypress-specific patterns (cy.visit, cy.get, cy.contains in steps)
- Add note: "Cypress steps use synchronous callbacks. Do not use async/await with Cypress steps."

**Mocha STEPS.md:**
- Replace {{FRAMEWORK_NAME}} with "Mocha"
- Replace {{PACKAGE_NAME}} with "mocha-qase-reporter", {{FRAMEWORK_INTEGRATION_PATH}} with "mocha"
- Use CommonJS: `const { qase } = require('mocha-qase-reporter/mocha')`
- Steps are SYNCHRONOUS - no async/await
- Use `function()` syntax (not arrow functions) where `this` context is needed (Phase 2 decision)
- Verify against `examples/single/mocha/test/stepTests.spec.js`
- {{STEP_ASYNC_EXAMPLE}}: Show `qase.step('name', function() { ... })` pattern
- Document both `qase.step()` and `this.step()` context-based pattern if supported
- Common Patterns: Show Mocha-specific patterns (describe/it structure with steps)

**Vitest STEPS.md:**
- Replace {{FRAMEWORK_NAME}} with "Vitest"
- Replace {{PACKAGE_NAME}} with "vitest-qase-reporter", no subpath
- Use TypeScript/ESM: `import { qase } from 'vitest-qase-reporter'`
- All step examples use `await qase.step('name', async () => { ... })` pattern (like Jest)
- Verify against `examples/single/vitest/test/steps.test.ts`
- {{STEP_ASYNC_EXAMPLE}}: Show async steps with expect() assertions
- Common Patterns: Show Vitest-specific patterns (describe/test structure, vi.fn() mocks in steps)

For all 3 files:
- Keep Step Status table from template
- Keep Best Practices section (adapt examples to sync/async per framework)
- Troubleshooting: Adapt "ensure you're using await" to sync frameworks where applicable
- See Also: Link to usage.md, ATTACHMENTS.md, commons config reference
- Run `node .planning/tools/validate-placeholders.js` on each file
  </action>
  <verify>
Run: `node .planning/tools/validate-placeholders.js qase-cypress/docs/STEPS.md && node .planning/tools/validate-placeholders.js qase-mocha/docs/STEPS.md && node .planning/tools/validate-placeholders.js qase-vitest/docs/STEPS.md`
All should exit with code 0. Verify files exist and have > 120 lines each.
  </verify>
  <done>
Cypress STEPS.md exists with synchronous callback examples and cy.* commands in steps.
Mocha STEPS.md exists with function() syntax and sync step patterns.
Vitest STEPS.md exists with async/await examples and TypeScript/ESM imports.
All 3 files have zero unreplaced placeholders.
  </done>
</task>

</tasks>

<verification>
1. All 5 STEPS.md files exist in their respective qase-{framework}/docs/ directories
2. Zero unreplaced {{PLACEHOLDER}} patterns in any file
3. Async frameworks (Jest, Playwright, Vitest) use `await qase.step()` consistently
4. Sync frameworks (Cypress, Mocha) do NOT use `await` for steps
5. Playwright documents both `qase.step()` and native `test.step()` patterns
6. Mocha uses `function()` syntax, not arrow functions
7. All files have consistent section ordering matching the template
8. See Also links point to valid relative paths
</verification>

<success_criteria>
- 5 STEPS.md files created, each > 120 lines
- validate-placeholders.js returns exit code 0 for all files
- Framework-specific step examples match working code in examples/single/
- Each guide includes: Overview, Defining Steps, Nested Steps, Steps with Expected Result/Data, Steps with Attachments, Step Status, Best Practices, Common Patterns, Troubleshooting, See Also
</success_criteria>

<output>
After completion, create `.planning/phases/03-feature-guides/03-02-SUMMARY.md`
</output>
